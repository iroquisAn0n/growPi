#!/bin/bash

source ../config
source functions

bot_token="${bot_token}"
receiver="${receiver}"
disable_notification="${disable_notification}"
caption="${caption}"
caption_day_night_indicator="${caption_day_night_indicator}"
indicator=""

#todo: implement checks

  if [ "${caption_day_night_indicator}" = true ]; then
    getDayNightIndicator
    caption=$caption$indicator
  fi


url="https://api.telegram.org/bot${bot_token}/sendPhoto?disable_notification=${disable_notification}&caption=${caption}"
curl -X POST -H "Content-Type: multipart/form-data" -F "chat_id=${receiver}" -F "photo=@$1" "$url" > /dev/null

echo "Image transmitted to ${receiver}"
